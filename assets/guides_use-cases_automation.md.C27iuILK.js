import{_ as s,c as n,o as a,a3 as l}from"./chunks/framework.BG__5Sii.js";const A=JSON.parse('{"title":"Automation","description":"","frontmatter":{},"headers":[],"relativePath":"guides/use-cases/automation.md","filePath":"guides/use-cases/automation.md","lastUpdated":1726151745000}'),p={name:"guides/use-cases/automation.md"},o=l(`<h1 id="automation" tabindex="-1">Automation <a class="header-anchor" href="#automation" aria-label="Permalink to &quot;Automation&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>This guide will walk you through the process of automating <a href="/guides/glossary.html#client">client</a> management and issuing <a href="/guides/glossary.html#record">records</a> using a series of API calls. By following these steps, you will be able to create a seamless workflow that integrates client creation and record issuance. This is particularly useful for systems such as registration forms on your website, allowing you to streamline these processes efficiently and effectively.</p><p>The result is a record that is sent to a client, either automatically via email or with a link that you can provide them with manually. The client can then go through the process of completing the record by uploading their documents and fulfilling any other necessary requirements. This automation not only saves time but also ensures a consistent and reliable process for managing client records.</p><p><strong>Objective:</strong> Automate the process of managing clients and issuing records.</p><h2 id="step-1-creating-a-client" tabindex="-1">Step 1: Creating a Client <a class="header-anchor" href="#step-1-creating-a-client" aria-label="Permalink to &quot;Step 1: Creating a Client&quot;">​</a></h2><p>To begin the automation, create a client. This is usually the first step in automating workflows, allowing subsequent operations to be linked to a specific client. This client entry will only contain basic details such as their full name and email. It will not trigger any records to be sent to the client.</p><p><strong><a href="https://developers.amiqus.co/aqid/api-reference.html#tag/Clients/operation/post-clients" target="_blank" rel="noreferrer">Endpoint</a>:</strong> <code>POST /api/v2/clients</code><br><strong>Description:</strong> Create a new client by providing necessary details like name and email.</p><p><strong>Code Example:</strong></p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-MHL_t" id="tab-gquTvj_" checked><label for="tab-gquTvj_">PHP</label><input type="radio" name="group-MHL_t" id="tab-CIR6uFZ"><label for="tab-CIR6uFZ">Python</label><input type="radio" name="group-MHL_t" id="tab-bhPOaPy"><label for="tab-bhPOaPy">Node.JS</label></div><div class="blocks"><div class="language-php active"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#BABED8;">php</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> CreateClient</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#C792EA;">  public</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> __construct</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">private</span><span style="color:#F78C6C;"> string</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">apiUrl</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;"> private</span><span style="color:#F78C6C;"> string</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">accessToken</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  {</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">  public</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> createClient</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">array</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">clientData</span><span style="color:#89DDFF;">):</span><span style="color:#F78C6C;"> array</span></span>
<span class="line"><span style="color:#89DDFF;">  {</span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">url </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> $this-&gt;</span><span style="color:#BABED8;">apiUrl </span><span style="color:#89DDFF;">.</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/clients</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">headers </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">Content-Type: application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">Authorization: Bearer </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> .</span><span style="color:#89DDFF;"> $this-&gt;</span><span style="color:#BABED8;">accessToken</span></span>
<span class="line"><span style="color:#89DDFF;">    ];</span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">payload </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> json_encode</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">clientData</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">ch </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> curl_init</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">url</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_setopt</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLOPT_RETURNTRANSFER</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> true);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_setopt</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLOPT_HTTPHEADER</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">headers</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_setopt</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLOPT_POST</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> true);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_setopt</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLOPT_POSTFIELDS</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">payload</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">response </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> curl_exec</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#89DDFF;"> (</span><span style="color:#82AAFF;">curl_errno</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">))</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      throw</span><span style="color:#F78C6C;"> new</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">curl_error</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">statusCode </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> curl_getinfo</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLINFO_RESPONSE_CODE</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_close</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#89DDFF;"> ($</span><span style="color:#BABED8;">statusCode </span><span style="color:#89DDFF;">!==</span><span style="color:#F78C6C;"> 201</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      throw</span><span style="color:#F78C6C;"> new</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Failed to create client, status code: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> .</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">statusCode</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#82AAFF;"> json_decode</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> true);</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#BABED8;">clientCreator </span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;"> new</span><span style="color:#FFCB6B;"> CreateClient</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://id.amiqus.co/api/v2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">your_access_token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#BABED8;">clientData </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">  &#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">    &#39;</span><span style="color:#C3E88D;">title</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">mr</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &#39;</span><span style="color:#C3E88D;">first_name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Martin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &#39;</span><span style="color:#C3E88D;">last_name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">McFly</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  ],</span></span>
<span class="line"><span style="color:#89DDFF;">  &#39;</span><span style="color:#C3E88D;">email</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">marty@example.com</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">  $</span><span style="color:#BABED8;">client </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">clientCreator</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">createClient</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">clientData</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#82AAFF;">  echo</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Client created successfully: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> .</span><span style="color:#82AAFF;"> print_r</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">client</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> true);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;"> catch</span><span style="color:#89DDFF;"> (</span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  echo</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Error: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> .</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">getMessage</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> requests</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> CreateClient</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> __init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> api_url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> access_token</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">api_url</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> api_url</span></span>
<span class="line"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">access_token</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> access_token</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> create_client</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> client_data</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">        url </span><span style="color:#89DDFF;">=</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">api_url</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">/clients&quot;</span></span>
<span class="line"><span style="color:#BABED8;">        headers </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">Authorization</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;Bearer </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">access_token</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#BABED8;">        payload </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dumps</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">client_data</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">        response </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> data</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">payload</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">status_code</span><span style="color:#89DDFF;"> !=</span><span style="color:#F78C6C;"> 201</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            raise</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;Failed to create client, status code: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">status_code</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">client_creator </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> CreateClient</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://id.amiqus.co/api/v2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">your_access_token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">client_data </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">        &#39;</span><span style="color:#C3E88D;">title</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">mr</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &#39;</span><span style="color:#C3E88D;">first_name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Martin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &#39;</span><span style="color:#C3E88D;">last_name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">McFly</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    &#39;</span><span style="color:#C3E88D;">email</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">marty@example.com</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    client </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> client_creator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create_client</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">client_data</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Client created successfully:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> client</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">))</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> axios </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">axios</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> CreateClient</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">  constructor</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">apiUrl</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> accessToken</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    this.</span><span style="color:#BABED8;">apiUrl</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> apiUrl</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    this.</span><span style="color:#BABED8;">accessToken</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> accessToken</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">  async</span><span style="color:#F07178;"> createClient</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">clientData</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> url</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> \`\${</span><span style="color:#89DDFF;">this.</span><span style="color:#BABED8;">apiUrl</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/clients</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> headers</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#F07178;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#F07178;">Authorization</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> \`</span><span style="color:#C3E88D;">Bearer </span><span style="color:#89DDFF;">\${</span><span style="color:#89DDFF;">this.</span><span style="color:#BABED8;">accessToken</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#89DDFF;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">      const</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> clientData</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> headers</span><span style="color:#89DDFF;"> }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">status</span><span style="color:#89DDFF;"> !==</span><span style="color:#F78C6C;"> 201</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        throw</span><span style="color:#89DDFF;"> new</span><span style="color:#82AAFF;"> Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">Failed to create client, status code: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">status</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      return</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#89DDFF;font-style:italic;"> catch</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      throw</span><span style="color:#89DDFF;"> new</span><span style="color:#82AAFF;"> Error</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">error</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> clientCreator </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> new</span><span style="color:#82AAFF;"> CreateClient</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://id.amiqus.co/api/v2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">your_access_token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> clientData </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">  name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">    title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">mr</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    first_name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Martin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    last_name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">McFly</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#F07178;">  email</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">marty@example.com</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">clientCreator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createClient</span><span style="color:#BABED8;">(clientData)</span></span>
<span class="line"><span style="color:#89DDFF;">  .</span><span style="color:#82AAFF;">then</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">client</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Client created successfully:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> client</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  .</span><span style="color:#82AAFF;">catch</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">error</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> error</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></div></div><h2 id="step-2-creating-a-record" tabindex="-1">Step 2: Creating a Record <a class="header-anchor" href="#step-2-creating-a-record" aria-label="Permalink to &quot;Step 2: Creating a Record&quot;">​</a></h2><p>Once the client is created, choose the <a href="/guides/glossary.html#step">steps</a> you&#39;d like the client to complete and create a record to be issued to the client. The below example will issue a record to a client that will ask them to conduct a Photo ID check and a Criminal Record check.</p><p><strong><a href="https://developers.amiqus.co/aqid/api-reference.html#tag/Records/operation/post-records" target="_blank" rel="noreferrer">Endpoint</a>:</strong> <code>POST /api/v2/records</code><br><strong>Description:</strong> Create a record to initiate a range of checks for the client.</p><p><strong>Code Example:</strong></p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-X-V8h" id="tab-v2hxnUB" checked><label for="tab-v2hxnUB">PHP</label><input type="radio" name="group-X-V8h" id="tab-AHFsFRM"><label for="tab-AHFsFRM">Python</label><input type="radio" name="group-X-V8h" id="tab-dV1kVS7"><label for="tab-dV1kVS7">Node.JS</label></div><div class="blocks"><div class="language-php active"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#BABED8;">php</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> CreateRecord</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#C792EA;">  public</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> __construct</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">private</span><span style="color:#F78C6C;"> string</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">apiUrl</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;"> private</span><span style="color:#F78C6C;"> string</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">accessToken</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  {</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">  public</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> createRecord</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">int</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">clientId</span><span style="color:#89DDFF;">):</span><span style="color:#F78C6C;"> array</span></span>
<span class="line"><span style="color:#89DDFF;">  {</span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">url </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> $this-&gt;</span><span style="color:#BABED8;">apiUrl </span><span style="color:#89DDFF;">.</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/records</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">headers </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">Content-Type: application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">Authorization: Bearer </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> .</span><span style="color:#89DDFF;"> $this-&gt;</span><span style="color:#BABED8;">accessToken</span></span>
<span class="line"><span style="color:#89DDFF;">    ];</span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">payload </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> json_encode</span><span style="color:#89DDFF;">([</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">client</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">clientId</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">steps</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        [</span></span>
<span class="line"><span style="color:#89DDFF;">          &#39;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">check.photo_id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">          &#39;</span><span style="color:#C3E88D;">preferences</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">report_type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">biometric</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">          ]</span></span>
<span class="line"><span style="color:#89DDFF;">        ],</span></span>
<span class="line"><span style="color:#89DDFF;">        [</span></span>
<span class="line"><span style="color:#89DDFF;">          &#39;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">check.criminal_record</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">          &#39;</span><span style="color:#C3E88D;">preferences</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">region</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">england</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">standard</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">          ]</span></span>
<span class="line"><span style="color:#89DDFF;">        ]</span></span>
<span class="line"><span style="color:#89DDFF;">      ],</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">notification</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">email</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Please complete the following request to begin onboarding with Fusion Industries.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#C3E88D;">reminder</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> =&gt;</span><span style="color:#89DDFF;"> true</span></span>
<span class="line"><span style="color:#89DDFF;">    ]);</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">ch </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> curl_init</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">url</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_setopt</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLOPT_RETURNTRANSFER</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> true);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_setopt</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLOPT_HTTPHEADER</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">headers</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_setopt</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLOPT_POST</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> true);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_setopt</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLOPT_POSTFIELDS</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">payload</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">response </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> curl_exec</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#89DDFF;"> (</span><span style="color:#82AAFF;">curl_errno</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">))</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      throw</span><span style="color:#F78C6C;"> new</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">curl_error</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">    $</span><span style="color:#BABED8;">statusCode </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> curl_getinfo</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> CURLINFO_RESPONSE_CODE</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#82AAFF;">    curl_close</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">ch</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#89DDFF;"> ($</span><span style="color:#BABED8;">statusCode </span><span style="color:#89DDFF;">!==</span><span style="color:#F78C6C;"> 201</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      throw</span><span style="color:#F78C6C;"> new</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Failed to create record, status code: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> .</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">statusCode</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#82AAFF;"> json_decode</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> true);</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Usage</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#BABED8;">recordCreator </span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;"> new</span><span style="color:#FFCB6B;"> CreateRecord</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://id.amiqus.co/api/v2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">your_access_token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#BABED8;">clientId </span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;"> 34853</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">  $</span><span style="color:#BABED8;">record </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">recordCreator</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">createRecord</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">clientId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#82AAFF;">  echo</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Record created successfully: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> .</span><span style="color:#82AAFF;"> print_r</span><span style="color:#89DDFF;">($</span><span style="color:#BABED8;">record</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> true);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;"> catch</span><span style="color:#89DDFF;"> (</span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  echo</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Error: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> .</span><span style="color:#89DDFF;"> $</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">getMessage</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> requests</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> CreateRecord</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> __init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> api_url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> access_token</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">api_url</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> api_url</span></span>
<span class="line"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">access_token</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> access_token</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> create_record</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> client_id</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">        url </span><span style="color:#89DDFF;">=</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">api_url</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">/records&quot;</span></span>
<span class="line"><span style="color:#BABED8;">        headers </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">Authorization</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;Bearer </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">access_token</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#BABED8;">        payload </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dumps</span><span style="color:#89DDFF;">({</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">client</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> client_id</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">steps</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">                {</span></span>
<span class="line"><span style="color:#89DDFF;">                    &#39;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">check.photo_id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                    &#39;</span><span style="color:#C3E88D;">preferences</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">                        &#39;</span><span style="color:#C3E88D;">report_type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">biometric</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">                    }</span></span>
<span class="line"><span style="color:#89DDFF;">                },</span></span>
<span class="line"><span style="color:#89DDFF;">                {</span></span>
<span class="line"><span style="color:#89DDFF;">                    &#39;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">check.criminal_record</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                    &#39;</span><span style="color:#C3E88D;">preferences</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">                        &#39;</span><span style="color:#C3E88D;">region</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">england</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                        &#39;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">standard</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">                    }</span></span>
<span class="line"><span style="color:#89DDFF;">                }</span></span>
<span class="line"><span style="color:#89DDFF;">            ],</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">notification</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">email</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Please complete the following request to begin onboarding with Fusion Industries.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &#39;</span><span style="color:#C3E88D;">reminder</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> True</span></span>
<span class="line"><span style="color:#89DDFF;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">        response </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> data</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">payload</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">status_code</span><span style="color:#89DDFF;"> !=</span><span style="color:#F78C6C;"> 201</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            raise</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;Failed to create record, status code: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">status_code</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Usage</span></span>
<span class="line"><span style="color:#BABED8;">record_creator </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> CreateRecord</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://id.amiqus.co/api/v2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">your_access_token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">client_id </span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;"> 34853</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    record </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> record_creator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create_record</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">client_id</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Record created successfully:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> record</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">))</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> axios </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">axios</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> CreateRecord</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">  constructor</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">apiUrl</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> accessToken</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    this.</span><span style="color:#BABED8;">apiUrl</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> apiUrl</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    this.</span><span style="color:#BABED8;">accessToken</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> accessToken</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">  async</span><span style="color:#F07178;"> createRecord</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">clientId</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> url</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> \`\${</span><span style="color:#89DDFF;">this.</span><span style="color:#BABED8;">apiUrl</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/records</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> headers</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#F07178;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      &#39;</span><span style="color:#F07178;">Authorization</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> \`</span><span style="color:#C3E88D;">Bearer </span><span style="color:#89DDFF;">\${</span><span style="color:#89DDFF;">this.</span><span style="color:#BABED8;">accessToken</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#89DDFF;">    };</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> payload</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">      client</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> clientId</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      steps</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#F07178;">          type</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">check.photo_id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          preferences</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">            report_type</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">biometric</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">          }</span></span>
<span class="line"><span style="color:#89DDFF;">        },</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#F07178;">          type</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">check.criminal_record</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          preferences</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">            region</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">england</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            type</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">standard</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">          }</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#F07178;">      ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      notification</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">email</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      message</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Please complete the following request to begin onboarding with Fusion Industries.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      reminder</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span></span>
<span class="line"><span style="color:#89DDFF;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">      const</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> payload</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> headers</span><span style="color:#89DDFF;"> }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">status</span><span style="color:#89DDFF;"> !==</span><span style="color:#F78C6C;"> 201</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        throw</span><span style="color:#89DDFF;"> new</span><span style="color:#82AAFF;"> Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">Failed to create record, status code: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">status</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      return</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#89DDFF;font-style:italic;"> catch</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      throw</span><span style="color:#89DDFF;"> new</span><span style="color:#82AAFF;"> Error</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">error</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Usage</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> recordCreator </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> new</span><span style="color:#82AAFF;"> CreateRecord</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://id.amiqus.co/api/v2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">your_access_token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> clientId </span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;"> 34853</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">recordCreator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRecord</span><span style="color:#BABED8;">(clientId)</span></span>
<span class="line"><span style="color:#89DDFF;">  .</span><span style="color:#82AAFF;">then</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">record</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Record created successfully:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> record</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  .</span><span style="color:#82AAFF;">catch</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">error</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> error</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></div></div>`,15),e=[o];function t(c,r,D,F,y,i){return a(),n("div",null,e)}const E=s(p,[["render",t]]);export{A as __pageData,E as default};
